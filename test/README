# Unit Tests for Boat Engine Controller

This directory contains comprehensive unit tests for the boat engine controller project.

## Test Structure

### test_onewire_helper/
Tests for the OneWire temperature sensor helper functions:
- Configuration creation and validation
- Different base names and sensor types
- Read delay parameters
- Sort order handling
- Signal K path formats

### test_main/
Tests for constants and configuration in Main.cpp:
- GPIO pin assignments and validation
- Timing constants (RPM and temperature read delays)
- Sensor configuration parameters
- Sort order progression
- Configuration path naming

### test_integration/
Integration tests verifying components work together:
- OneWire bus sharing across sensors
- Unique configuration paths
- Signal K path specifications
- Sort order spacing
- Concurrent sensor operation
- Sensor pipeline structure

## Running Tests

Run all tests:
```bash
pio test -e test
```

Run specific test suite:
```bash
pio test -e test -f test_onewire_helper
pio test -e test -f test_main
pio test -e test -f test_integration
```

Run tests on physical device:
```bash
pio test -e test --upload-port COM3
```

## Test Framework

Tests use PlatformIO's Unity testing framework.

More information:
- https://docs.platformio.org/page/plus/unit-testing.html
- https://github.com/ThrowTheSwitch/Unity

## Coverage

Current tests cover:
✓ Hardware pin configuration
✓ Timing constants validation
✓ Sensor configuration parameters
✓ OneWire helper function behavior
✓ Signal K path conventions
✓ Configuration path uniqueness
✓ Integration between components
✓ Concurrent operation feasibility
